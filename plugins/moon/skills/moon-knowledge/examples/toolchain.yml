# Toolchain configuration for a Node.js + Rust + Python workspace
# Uses the new unstable_ toolchain APIs (as of moon v1.40+)
$schema: 'https://moonrepo.dev/schemas/toolchain.json'

# JavaScript toolchain (required for Node.js)
unstable_javascript:
  packageManager: 'pnpm'
  inferTasksFromScripts: true
  syncProjectWorkspaceDependencies: true

# Node.js configuration (new WASM plugin)
unstable_node:
  version: '22.12.0'

# pnpm package manager
unstable_pnpm:
  version: '9.15.0'

# Legacy node config (for older moon versions < 1.40)
# node:
#   version: '22.12.0'
#   packageManager: 'pnpm'
#   pnpm:
#     version: '9.15.0'
#   inferTasksFromScripts: true

# Rust configuration
rust:
  version: '1.83.0'
  syncToolchainConfig: true
  bins:
    - 'cargo-watch'
    - 'cargo-nextest'

# Python configuration
python:
  version: '3.12.0'

# Bun as alternative runtime
bun:
  version: '1.1.0'
